<section
  class="min-h-screen flex items-center justify-center px-4
         bg-gradient-to-b
         from-[#4BBEC3]
         via-[#1F6F85]
         to-[#0C2846]"
>
  <div class="w-full max-w-md">
    <div
      class="bg-slate-900/40 backdrop-blur-xl border border-slate-700
             rounded-2xl shadow-xl p-8"
    >
      @if (loading) {
        <p class="text-slate-300 text-center">Verificando enlace...</p>
      } @else if (invalidLink) {

        <h1 class="text-2xl font-semibold text-white mb-2">
          Enlace inválido
        </h1>

        <p class="text-sm text-slate-300 mb-6">
          Este enlace es inválido, expiró o ya fue utilizado.
          Solicita uno nuevo o vuelve a iniciar sesión.
        </p>

        <a
          routerLink="/auth/sign-in"
          class="inline-flex items-center justify-center w-full py-2.5 rounded-lg
                 bg-green-600 hover:bg-green-500 text-white font-medium
                 transition shadow-lg hover:shadow-green-600/30"
        >
          Ir a iniciar sesión
        </a>

      } @else {

        <h1 class="text-2xl font-semibold text-white mb-2">
          Crear contraseña
        </h1>

        <p class="text-sm text-slate-300 mb-6">
          Usuario: <span class="font-medium text-white">{{ email }}</span>
        </p>

        <form [formGroup]="form" (ngSubmit)="submit()" class="space-y-5">
          <div>
            <label class="block text-sm text-slate-300 mb-1">
              Nueva contraseña
            </label>
            <input
              type="password"
              formControlName="password"
              placeholder="••••••••"
              class="w-full px-4 py-2.5 rounded-lg bg-slate-800 border border-slate-700 text-slate-200
                     placeholder-slate-500 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition"
            />
            @if (form.controls.password.touched && form.controls.password.hasError('required')) {
              <p class="text-red-400 text-xs mt-1">Requerido</p>
            }
            @if (form.controls.password.touched && form.controls.password.hasError('minlength')) {
              <p class="text-red-400 text-xs mt-1">Mínimo 6 caracteres</p>
            }
          </div>

          <div>
            <label class="block text-sm text-slate-300 mb-1">
              Confirmar contraseña
            </label>
            <input
              type="password"
              formControlName="confirmPassword"
              placeholder="••••••••"
              class="w-full px-4 py-2.5 rounded-lg bg-slate-800 border border-slate-700 text-slate-200
                     placeholder-slate-500 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition"
            />
            @if (passwordsDoNotMatch()) {
              <p class="text-red-400 text-xs mt-1">Las contraseñas no coinciden</p>
            }
          </div>

          <button
            type="submit"
            [disabled]="submitting"
            class="w-full py-2.5 rounded-lg bg-green-600 hover:bg-green-500
                   text-white font-medium transition shadow-lg hover:shadow-green-600/30
                   disabled:opacity-60 disabled:cursor-not-allowed"
          >
            @if (submitting) { Guardando... } @else { Crear contraseña }
          </button>
        </form>

      }
    </div>
  </div>
</section>
